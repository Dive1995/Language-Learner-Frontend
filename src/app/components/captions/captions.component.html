<div *ngIf="transcript$ | async as transcript" class="transcript">
    <!-- TODO: add an info icon, popup this on the first load then hide it, make it clickable-->
    <p *ngIf="transcript.isGenerated" class="caption__info">
      <i class='bx bxs-info-circle'></i>
      Please note that the following transcript is a generated one, and might not be correct
    </p>
    <div class="caption__container">
        <div class="caption caption-first" *ngIf="transcript.firstCaption?.length">
          <p class="caption__text">
            <span class="caption__text-word" *ngFor="let word of transcript.firstCaption; let index = index" (click)="findWordMeaning(word, index)">
                <span *ngIf="wordMeaning$ | async as meaning">
                  <span class="word-meaning" *ngIf="clickedWordIndex == index && clickedWord === word">
                    <span *ngIf="!meaning.input || meaning.input !== word">
                      <i class='bx bx-loader'></i>
                    </span>
                    <span *ngIf="meaning.input === word">{{meaning.translation}}</span>
                  </span>
                </span>
              {{word}}
            </span>
          </p>
        </div>
        <div *ngIf="controls$ | async as controls">
          <div class="caption caption-second" [class.caption__unblured]="controls.unblurSecondCaption" *ngIf="controls.showSecondCaption && transcript.secondCaption?.length">
            <p class="caption__text">
              <span class="caption__text-word" *ngFor="let word of transcript.secondCaption">{{word}}</span>
            </p>
          </div>
        </div>
    </div>
  </div>